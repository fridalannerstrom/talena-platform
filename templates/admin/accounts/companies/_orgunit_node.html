{% load org_extras %}

<li class="mb-1">

  <div class="org-node d-flex align-items-center gap-2 org-row rounded px-2 py-2"
       draggable="true"
       data-unit-id="{{ unit.id }}"
       data-drop-parent-id="{{ unit.id }}">

    <i class="fa-solid fa-grip-vertical text-muted"></i>

    <a href="?tab=accounts&org_unit={{ unit.id }}"
       class="org-link fw-semibold text-decoration-none">
      {{ unit.name }}
      <span class="text-muted">({{ unit.unit_code }})</span>
    </a>
  </div>

  {% with kids=children_map|get_item:unit.id %}
    {% if kids %}
      <ul class="list-unstyled ms-4 mt-1">
        {% for child in kids %}
          {% include "admin/accounts/companies/_orgunit_node.html" with unit=child %}
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

</li>
