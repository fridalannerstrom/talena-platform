{% load org_extras %}

<li class="mb-1">

  {# Rad / klickyta #}
<div class="org-node org-row d-flex align-items-center gap-2 px-2 py-2 rounded
            {% if selected_unit and unit.id == selected_unit.id %}org-active{% endif %}"
     draggable="true"
     data-unit-id="{{ unit.id }}"
     data-drop-parent-id="{{ unit.id }}">

    <i class="fa-solid fa-grip-vertical text-muted"></i>

    <a class="org-link {% if selected_unit and unit.id == selected_unit.id %}active{% endif %}"
   href="?tab=accounts&org_unit={{ unit.id }}"
   draggable="false">
      <span class="fw-semibold">{{ unit.name }}</span>
      <span class="text-muted">({{ unit.unit_code }})</span>
    </a>
  </div>

  {# Barn #}
  {% with kids=children_map|get_item:unit.id %}
    {% if kids %}
      <ul class="list-unstyled ms-4 mt-1">
        {% for child in kids %}
          {% include "admin/accounts/companies/_orgunit_node.html" with unit=child selected_unit=selected_unit children_map=children_map %}
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

</li>
